class isPopup{constructor(e){const t={button:".open-gdpr-popup-js",slideoutClass:"gdpr-slideout",slideoutInner:".gdpr-slideout-inner",cookieObj:cookieFullObj,slideoutTemplate:({type:e,title:t,items:i},o)=>`\n                    <div class="gdpr-slideout-inner ${e}">\n                        <div class="gdpr--top-bar">\n                            <button class="gdpr-close" title="Close Popup" tabindex="0"><i></i></button>\n                            <div class="secondLvlCss">\n                                <p class="title">${t}</p>\n                            </div>\n                        </div>\n                        <div class="gdpr--content">\n                            ${i}\n                        </div>\n                    </div>\n                `,gdprGroups:({name:e,description:t,cookiesHtml:i},o)=>`\n                    <div class="gdpr-item" role="region" aria-labelledby="cookies-section-${e.toLowerCase()}">\n                        <h3 class="gdpr-item--title" id="cookies-section-${e.toLowerCase()}">${e} Cookies</h3>\n                        <p class="gdpr-item--description">${t}</p>\n                        <div class="gdpr-item--cookie-table">\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Cookie Name</th>\n                                        <th>Description</th>\n                                        <th>Duration</th>\n                                    </tr>\n                                    ${i}\n                                </thead>\n                            </table>\n                        </div>\n                    </div>\n                `.replace(/(\r\n|\n|\r)/gm,""),gdprCookieDescription:({name:e,description:t,duration:i},o)=>`\n                    <tr>\n                        <td>${e}</td>\n                        <td>${t}</td>\n                        <td>${i}</td>\n                    </tr>\n                `.replace(/(\r\n|\n|\r)/gm,""),excludeMatch:e=>null==e.target.closest(".gdpr-slideout-inner")&&null==e.target.closest(".open-gdpr-popup-js"),closeWait:502};this.opts={...t,...e},this.html=document.querySelector("html"),this.slideoutHtml=null,this.openTimeout=0,this.closeTimeout=0,this.activeBtn=null,this.focusTrap=null}gdprCookieDescriptionTemplate(e){return this.opts.gdprCookieDescription(e,this)}gdprGroupsTemplate(e){return this.opts.gdprGroups(e,this)}gdprAllTemplate(e){return this.opts.slideoutTemplate(e,this)}handleCookieTemplate(e){let t="";const i=e[1],o=i.cookies;let n="";return o.length>0?(o.forEach((e=>{n+=this.gdprCookieDescriptionTemplate({name:e.display[0],description:e.display[2],duration:e.display[3]})})),t+=this.gdprGroupsTemplate({name:i.name,description:i.description,cookiesHtml:n}),t):""}extractCookieInfo(e){const t=this.opts.cookieObj,i=e.group.toLowerCase();if("all"===i){let e="";return Object.entries(t).forEach(((t,i)=>{e+=this.handleCookieTemplate(t)})),this.gdprAllTemplate({title:"Cookie Policy",type:"all",items:e})}const o=Object.entries(t).filter((([e,t])=>e===i));return this.gdprAllTemplate({title:i+" Cookies",type:"single",items:this.handleCookieTemplate(o[0])})}generatePopup(e){const t=document.createElement("div");t.id="gdpr-slideout-main",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("tabindex","0"),t.classList.add(this.opts.slideoutClass),this.clearPopup();const i=this.extractCookieInfo(e);return t.innerHTML=i,this.slideoutHtml=t,document.querySelector("body").appendChild(t),!1}clearPopup(){null!==this.slideoutHtml&&(this.slideoutHtml.remove(),this.slideoutHtml=null)}open(e,t){this.generatePopup(e),null!==this.slideoutHtml&&(this.focusTrap=focusTrap.createFocusTrap("#gdpr-slideout-main"),this.slideoutHtml.classList.add("loaded"),this.html.classList.add("gdpr-fixed"),this.activeBtn=t,clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout),this.openTimeout=setTimeout((()=>{this.slideoutHtml.classList.add("open"),this.focusTrap.activate()}),10))}close(e){null!==this.focusTrap&&(this.focusTrap.deactivate(),this.focusTrap=null),null!==this.slideoutHtml&&this.slideoutHtml.classList.remove("open"),null!==this.activeBtn&&(this.activeBtn.focus(),this.activeBtn=null),this.html.classList.remove("gdpr-fixed"),clearTimeout(this.closeTimeout),clearTimeout(this.openTimeout),this.closeTimeout=setTimeout((()=>{this.clearPopup()}),this.opts.closeWait)}events(){document.querySelectorAll(this.opts.button).forEach((e=>{const t=e.getAttribute("data-popup-group");e.addEventListener("click",(i=>{this.open({group:t},e)}))})),document.addEventListener("keydown",(e=>{void 0!==e.key&&"escape"===e.key.toLowerCase()&&e.target.closest("#gdpr-slideout-main")&&this.close()})),document.addEventListener("click",(e=>{e.target.closest(".gdpr-close")&&this.close(),this.opts.excludeMatch(e)&&this.close()}))}init(){this.events()}}const gdpr=function(){const e=null!==document.getElementById("intSchoolsCookieManager")?JSON.parse(decodeURIComponent(document.getElementById("intSchoolsCookieManager").getAttribute("data-cookieGroups"))):{},t=document.getElementById("gdpr-cookies"),i=document.querySelector("#gdpr-cookies .gdpr-manage-list"),o=document.querySelector("html");let n={};const s="<div class='gdpr-item {TYPE} {DISABLED_CLASS} gdpr-item-generated'><div class='gdpr-item-container'><div class='gdpr-info'><button class='gdpr-link open-gdpr-popup-js' data-popup-group='{NAME}' title='Check {NAME} policy' aria-haspopup='dialog'></button><label class='gdpr-txt safe-wrap' for='gdpr-{TYPE}'>{NAME}{EXTRA_TEXT}</label></div><div class='gdpr-checkbox'><input type='checkbox' id='gdpr-{TYPE}' data-gdpr-group='{TYPE}' {CHECKED} class='tick-box tick-box-generated' name='{ACCESIBLE_NAME}'><div class='gdpr-switch'><div class='circle'></div></div></div></div></div>",c={gdprConsentTimeout:0,addScript:function(e,t){const i=document.createElement("script");""!=e&&(i.src=e),""!=t&&(i.innerHTML=t),document.body.appendChild(i)},isDisplayNone:function(e){return"none"===window.getComputedStyle(e).display},showContainer:function(){const e=t.querySelector(".gdpr-box");if(this.isDisplayNone(e))return;t.style.display="block";const i=document.querySelector("body"),n=window.location.pathname;t.classList.contains("v2")||n.includes("terms")||i.classList.contains("terms")||o.classList.add("cookie-blocked-page")},hideContainerOnClick:function(e){void 0!==e&&t.classList.add("gdpr-consent-necessary"),t.classList.add("gdpr-consent"),clearTimeout(this.gdprConsentTimeout),this.gdprConsentTimeout=setTimeout((function(){t.classList.remove("gdpr-consent"),t.classList.remove("gdpr-consent-necessary"),o.classList.remove("cookie-blocked-page"),t.style.display="none",t.style.display="none",t.classList.remove("manage-tab")}),1200)},runScripts:function(e){const t=document.getElementsByTagName("script");void 0!==e&&(n=e);for(let e=0;e<t.length;e++){let i=t[e].getAttribute("type"),o=t[e].getAttribute("data-cookieGroup");"text/plain"===i&&null!==o&&void 0!==n[o]&&n[o].enabled&&(t[e].setAttribute("type","text/javascript"),null==t[e].getAttribute("src")?this.addScript("",t[e].innerHTML):this.addScript(t[e].getAttribute("src"),""))}},setCookie:function(e,t,i){let o="";if(i<0){const t=window.location.hostname.split(".");for(;t.length>0;)document.cookie=`${e}=; Path=/; Domain=${t.join(".")}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${e}=; Path=/; Domain=.${t.join(".")}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,t.shift();return document.cookie=`${e}=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${e}=; Path=/; Domain=.google.com; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,document.cookie=`${e}=; Path=/; Domain=.vimeo.com; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`,!1}if(null!=i&&0!==i){let e=new Date;e.setDate(e.getDate()+i),o="; expires="+e.toUTCString()}let n=t+o;document.cookie=e+"="+n+"; path=/"},getCookie:function(e){let t,i,o,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(i=n[t].substr(0,n[t].indexOf("=")),o=n[t].substr(n[t].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return unescape(o);return""},deleteCookie:function(e){this.setCookie(e,"",-1)},getAllCookies:function getAllCookies(){const e=document.cookie.split(";"),t=[];for(let i=0;i<e.length;i++){let o=e[i].split("=");t.push((o[0]+"").trim())}return t},clearSpecificCookie:function(){const t=this;if(""!==c.getCookie("intSchoolsCookieManager")){let i=JSON.parse(decodeURIComponent(c.getCookie("intSchoolsCookieManager"))),o=Object.entries(i);const n=e;let s=this.getAllCookies();o.forEach((e=>{let i=e[0],o=e[1],c=n[i].cookies;if(!o.enabled)for(let e=0;e<c.length;e++)s.forEach((i=>{i.match(c[e])&&t.deleteCookie(i)}))}))}},clearAllCookies:function(){const t=this;let i=this.getAllCookies();Object.entries(e).forEach((e=>{e[0];let o=e[1].cookies;for(let e=0;e<o.length;e++)i.forEach((i=>{i.match(o[e])&&t.deleteCookie(i)}))}))}},l={consentTemplate:function(e,t){let i="",o="",n="no-disabled",c="";"necessary"===e.toLowerCase()&&(i="checked disabled",o="disabled",n="disabled",c="<span class='gdpr-extra'> Always On</span>");let l="Accept All Cookies";return"necessary"===e.toLowerCase()&&(l="Accept Necessary Cookies"),"marketing"===e.toLowerCase()&&(l="Accept Marketing Cookies"),"statistics"===e.toLowerCase()&&(l="Accept Statistics Cookies"),s.replace(/{TYPE}/g,e).replace(/{LINK}/g,t.link+"#"+t.htmlAnchor).replace(/{NAME}/g,t.name).replace(/{CHECKED}/g,t.enabled?i:o).replace(/{DISABLED_CLASS}/g,n).replace(/{ACCESIBLE_NAME}/g,l).replace(/{EXTRA_TEXT}/g,c)},consentItems:function(){const t=this;return i.innerHTML+="<div class='gdpr-item gdpr-item-go-back'><button class='gdpr-go-back'><i class='gdpr-arrow'></i><span class='txt'>Go Back</span></button></div>",i.innerHTML+="<div class='gdpr-item gdpr-all'><div class='gdpr-item-container'><div class='gdpr-info'><label class='gdpr-txt safe-wrap' for='gdpr-accept-all'>All <span>(Recommended)</span></label></div><div class='gdpr-checkbox'><input type='checkbox' id='gdpr-accept-all' checked class='tick-box' name='Accept All Cookies'><div class='gdpr-switch'><div class='circle'></div></div></div></div></div>",0==Object.keys(n).length?(Object.entries(e).forEach((e=>{let o=e[0],s=e[1];s.enabled&&(n[o]={name:s.name,enabled:!0,dataCookieGroup:o},i.innerHTML+=t.consentTemplate(o,s))})),!1):(Object.entries(n).forEach((e=>{let o=e[0],n=e[1];i.innerHTML+=t.consentTemplate(o,n)})),!1)},init:function(){this.consentItems()}},a={containerChangeTimeout:0,finalStateTimeout:0,toggleTab:function(e,i,o,n){const s=this,c=document.querySelector(".gdpr-inner"),l=document.querySelector(".gdpr .gdpr-box-decorator");let a=.3;t.classList.add("animation-begin"),o&&(a=0);const r={from:e.getBoundingClientRect(),to:i.getBoundingClientRect()},d=n.first.getBoundingClientRect();n.second.getBoundingClientRect();r.from.height;let p=r.to.height,u=t.classList.contains("v1")?56:0,g=60+(window.innerWidth<768?102:u),m=d.height+g;l.style.transform=`scaleY(${(p+g)/m})`,l.style.height=m+"px",e.style.transition=`opacity ${a}s ease, visibility ${a}s ease`,e.style.opacity=0,e.style.visibility="hidden",s.delayedOpacityAnimation=setTimeout((()=>{e.style.position="absolute",i.style.position="relative",i.style.opacity=1,i.style.visibility="visible"}),250),clearTimeout(s.finalStateTimeout),s.finalStateTimeout=setTimeout((function(){c.style.height=null,c.style.pointerEvents=null,t.classList.remove("animation-begin")}),700)},setPref:function(){const e=document.querySelector(".gdpr .gdpr-pref");setTimeout((()=>{Object.entries(n).forEach((e=>{c.runScripts()}))}),5e3),e.querySelector(".initial").setAttribute("aria-hidden","true"),e.querySelector(".confirmed").setAttribute("aria-hidden","false"),c.setCookie("intSchoolsCookieManager",encodeURIComponent(JSON.stringify(n)),365);const t=c.getCookie("intSchoolsCookieManager")||JSON.stringify(n),i=JSON.parse(decodeURIComponent(t)),o=new CustomEvent("consentUpdated",{detail:{marketing:i.marketing.enabled,necessary:i.necessary.enabled,statistics:i.statistics.enabled}});document.dispatchEvent(o),c.clearSpecificCookie()},checkInput:function(){const e=document.querySelectorAll(".tick-box-generated"),i=e.length,o=document.getElementById("gdpr-accept-all");let n=0;for(let t=0;t<i;t++)e[t].checked&&n++;if(i===n)return o.checked=!0,t.classList.add("all-accepted"),!1;t.classList.remove("all-accepted"),o.checked=!1},events:function(){const e=this,i=document.getElementById("gdpr-accept-all"),o=document.querySelectorAll(".tick-box-generated"),s=document.querySelector(".manage-pref"),l=document.querySelector(".gdpr-go-back"),a=document.querySelector(".gdpr-accept-all"),r=document.querySelector(".gdpr .gdpr-pref"),d=document.querySelectorAll(".gdpr .only-necessary");o.forEach((function(t){t.addEventListener("click",(function(t){let i=this.getAttribute("data-gdpr-group");n[i].enabled=this.checked,e.checkInput()}))})),r.addEventListener("click",(t=>{o.forEach((e=>{let t=e.getAttribute("data-gdpr-group");n[t].enabled=e.checked})),e.setPref(),c.hideContainerOnClick(),"undefined"!=typeof termsFunctionality&&termsFunctionality.empty(),"undefined"!=typeof termsFunctionality&&termsFunctionality.init()})),a.addEventListener("click",(t=>{o.forEach((e=>{e.disabled||(e.checked=!0)})),e.setPref(),c.hideContainerOnClick(),"undefined"!=typeof termsFunctionality&&termsFunctionality.empty(),"undefined"!=typeof termsFunctionality&&termsFunctionality.init()})),d.forEach((t=>{t.addEventListener("click",(t=>{o.forEach((e=>{if(!e.disabled){let t=e.getAttribute("data-gdpr-group");e.checked=!1,n[t].enabled=e.checked}})),e.setPref(),c.hideContainerOnClick(!0),"undefined"!=typeof termsFunctionality&&termsFunctionality.empty(),"undefined"!=typeof termsFunctionality&&termsFunctionality.init()}))})),i.addEventListener("click",(function(){let t=this.checked;o.forEach((e=>{if(!e.disabled){let i=e.getAttribute("data-gdpr-group");e.checked=t,n[i].enabled=e.checked}})),e.checkInput()})),s.addEventListener("click",(i=>{if(!t.classList.contains("manage-tab")){const i=document.querySelector(".gdpr-description"),o=document.querySelector(".gdpr-manage-list");e.toggleTab(i,o,!1,{first:i,second:o}),t.classList.add("manage-tab")}})),l.addEventListener("click",(i=>{const o=document.querySelector(".gdpr-description"),n=document.querySelector(".gdpr-manage-list");e.toggleTab(n,o,!1,{first:o,second:n}),t.classList.remove("manage-tab")}))}};function _changeConsent(){const e=document.querySelector(".gdpr-description"),i=document.querySelector(".gdpr-manage-list"),o=document.querySelectorAll(".tick-box-generated");t.classList.contains("manage-tab")||(c.showContainer(),a.toggleTab(e,i,!0,{first:e,second:i}),t.classList.add("manage-tab"),o.forEach((e=>{e.getAttribute("data-gdpr-group");a.checkInput()})))}return{init:function _init(){return Object.keys(e).length>0&&null!==t?(""!==c.getCookie("intSchoolsCookieManager")?(n=JSON.parse(decodeURIComponent(c.getCookie("intSchoolsCookieManager"))),setTimeout((()=>{c.runScripts()}),5e3)):(c.showContainer(),c.clearAllCookies()),l.init(),a.events(),a.checkInput(),function _generatePopup(){(new isPopup).init()}(),!1):(null!==t&&t.remove(),!1)},changeConsent:_changeConsent,withdrawConsent:function _withdrawConsent(){const e=document.querySelectorAll(".tick-box-generated");c.clearAllCookies(),c.deleteCookie("intSchoolsCookieManager");const t=new CustomEvent("consentUpdated",{detail:{marketing:!1,necessary:!0,statistics:!1}});document.dispatchEvent(t),c.showContainer(),e.forEach((e=>{e.disabled||(e.checked=!1)})),document.getElementById("withdraw-consent-gdpr").remove(),_changeConsent(),"undefined"!=typeof termsFunctionality&&termsFunctionality.empty()}}}();document.addEventListener("DOMContentLoaded",(function(){gdpr.init()}));